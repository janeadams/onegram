"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _isString2 = _interopRequireDefault(require("lodash/isString"));

var _get2 = _interopRequireDefault(require("lodash/get"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const getMessage = ex => (0, _get2.default)(ex, "exceptionMessage", (0, _get2.default)(ex, "message", (0, _get2.default)(ex, "ExceptionMessage", (0, _get2.default)(ex, "Message"))));

var _default = data => {
  if ((0, _isString2.default)(data)) return data;
  if (!data) return null; // if it is a .net exception, try to find the inner-most exception

  let ex = data;

  while (ex.innerException) {
    const origEx = ex;
    ex = ex.innerException;
    ex.outerException = origEx;
  } // try to look for a message or exception message


  let msg = getMessage(ex);

  while (!msg && ex.outerException) {
    // go back up the tree looking for more messages
    ex = ex.outerException;
    msg = getMessage(ex);
  }

  return msg;
};

exports.default = _default;